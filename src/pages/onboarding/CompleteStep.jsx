import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { useTranslation } from 'react-i18next';\nimport { \n  CheckCircle, \n  Sparkles, \n  ArrowRight, \n  Calendar, \n  Users, \n  TrendingUp, \n  BookOpen,\n  Play,\n  ExternalLink\n} from 'lucide-react';\n\nimport { Card, CardContent, CardHeader, CardTitle } from '../../components/ui/card';\nimport { Button } from '../../components/ui/button';\n\nconst CompleteStep = ({ data, onComplete, saving }) => {\n  const { t } = useTranslation();\n  const [showNextSteps, setShowNextSteps] = useState(false);\n\n  const nextSteps = [\n    {\n      id: 'first-entry',\n      icon: TrendingUp,\n      title: t('onboarding.complete.nextSteps.firstEntry.title', 'Première écriture comptable'),\n      description: t('onboarding.complete.nextSteps.firstEntry.description', 'Commencez par saisir votre première écriture comptable'),\n      action: t('onboarding.complete.nextSteps.firstEntry.action', 'Aller à la comptabilité'),\n      color: 'text-blue-600',\n      bgColor: 'bg-blue-100',\n      link: '/accounting'\n    },\n    {\n      id: 'first-invoice',\n      icon: Calendar,\n      title: t('onboarding.complete.nextSteps.firstInvoice.title', 'Première facture'),\n      description: t('onboarding.complete.nextSteps.firstInvoice.description', 'Créez votre première facture client'),\n      action: t('onboarding.complete.nextSteps.firstInvoice.action', 'Créer une facture'),\n      color: 'text-green-600',\n      bgColor: 'bg-green-100',\n      link: '/invoicing'\n    },\n    {\n      id: 'invite-team',\n      icon: Users,\n      title: t('onboarding.complete.nextSteps.inviteTeam.title', 'Inviter votre équipe'),\n      description: t('onboarding.complete.nextSteps.inviteTeam.description', 'Ajoutez des collaborateurs à votre espace de travail'),\n      action: t('onboarding.complete.nextSteps.inviteTeam.action', 'Gérer l\\'équipe'),\n      color: 'text-purple-600',\n      bgColor: 'bg-purple-100',\n      link: '/team'\n    },\n    {\n      id: 'explore-features',\n      icon: BookOpen,\n      title: t('onboarding.complete.nextSteps.exploreFeatures.title', 'Explorer les fonctionnalités'),\n      description: t('onboarding.complete.nextSteps.exploreFeatures.description', 'Découvrez toutes les fonctionnalités disponibles'),\n      action: t('onboarding.complete.nextSteps.exploreFeatures.action', 'Centre d\\'aide'),\n      color: 'text-orange-600',\n      bgColor: 'bg-orange-100',\n      link: '/help'\n    }\n  ];\n\n  const companyInfo = data?.companyProfile || {};\n  const preferences = data?.preferences || {};\n\n  const containerVariants = {\n    hidden: { opacity: 0 },\n    visible: {\n      opacity: 1,\n      transition: { staggerChildren: 0.1 }\n    }\n  };\n\n  const itemVariants = {\n    hidden: { opacity: 0, y: 20 },\n    visible: { opacity: 1, y: 0 }\n  };\n\n  const celebrationVariants = {\n    hidden: { scale: 0, opacity: 0 },\n    visible: {\n      scale: 1,\n      opacity: 1,\n      transition: {\n        type: 'spring',\n        stiffness: 200,\n        damping: 20\n      }\n    }\n  };\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      className=\"max-w-4xl mx-auto\"\n    >\n      {/* Célébration */}\n      <motion.div variants={celebrationVariants} className=\"text-center mb-12\">\n        <div className=\"relative\">\n          <motion.div\n            animate={{ \n              rotate: [0, 360],\n              scale: [1, 1.2, 1]\n            }}\n            transition={{\n              duration: 3,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"mx-auto mb-6\"\n          >\n            <div className=\"bg-gradient-to-r from-green-400 to-blue-500 p-6 rounded-full\">\n              <CheckCircle className=\"w-16 h-16 text-white\" />\n            </div>\n          </motion.div>\n          \n          {/* Particules de célébration */}\n          <div className=\"absolute inset-0 pointer-events-none\">\n            {[...Array(8)].map((_, i) => (\n              <motion.div\n                key={i}\n                initial={{ opacity: 0, scale: 0, y: 0 }}\n                animate={{ \n                  opacity: [0, 1, 0],\n                  scale: [0, 1, 0.5],\n                  y: [-50, -100, -150],\n                  x: [0, Math.random() * 100 - 50, Math.random() * 200 - 100]\n                }}\n                transition={{\n                  duration: 2,\n                  repeat: Infinity,\n                  delay: i * 0.3,\n                  ease: \"easeOut\"\n                }}\n                className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"\n              >\n                <Sparkles className=\"w-6 h-6 text-yellow-400\" />\n              </motion.div>\n            ))}\n          </div>\n        </div>\n        \n        <h1 className=\"text-4xl font-bold text-gray-900 dark:text-white mb-4\">\n          {t('onboarding.complete.title', 'Félicitations !')}\n        </h1>\n        \n        <p className=\"text-xl text-gray-600 dark:text-gray-300 mb-8\">\n          {t('onboarding.complete.subtitle', 'Votre espace de travail CassKai est maintenant configuré et prêt à l\\'emploi')}\n        </p>\n\n        <div className=\"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900 dark:to-blue-900 p-6 rounded-lg mb-8\">\n          <div className=\"flex items-center justify-center space-x-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n                {companyInfo.name || t('onboarding.complete.company', 'Votre entreprise')}\n              </div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-300\">\n                {t('onboarding.complete.configured', 'Configuré avec succès')}\n              </div>\n            </div>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Résumé de la configuration */}\n      <motion.div variants={itemVariants} className=\"mb-12\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-center\">\n              {t('onboarding.complete.summary.title', 'Résumé de votre configuration')}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <h4 className=\"font-semibold text-gray-900 dark:text-white mb-3\">\n                  {t('onboarding.complete.summary.company', 'Entreprise')}\n                </h4>\n                <div className=\"space-y-2 text-sm text-gray-600 dark:text-gray-300\">\n                  <div><strong>{t('onboarding.complete.summary.name', 'Nom')}:</strong> {companyInfo.name}</div>\n                  <div><strong>{t('onboarding.complete.summary.industry', 'Secteur')}:</strong> {companyInfo.industry}</div>\n                  <div><strong>{t('onboarding.complete.summary.location', 'Localisation')}:</strong> {companyInfo.city}, {companyInfo.country}</div>\n                  <div><strong>{t('onboarding.complete.summary.employees', 'Effectif')}:</strong> {companyInfo.employeeCount}</div>\n                </div>\n              </div>\n              \n              <div>\n                <h4 className=\"font-semibold text-gray-900 dark:text-white mb-3\">\n                  {t('onboarding.complete.summary.preferences', 'Préférences')}\n                </h4>\n                <div className=\"space-y-2 text-sm text-gray-600 dark:text-gray-300\">\n                  <div><strong>{t('onboarding.complete.summary.language', 'Langue')}:</strong> {preferences.language}</div>\n                  <div><strong>{t('onboarding.complete.summary.currency', 'Devise')}:</strong> {preferences.currency}</div>\n                  <div><strong>{t('onboarding.complete.summary.timezone', 'Fuseau horaire')}:</strong> {preferences.timezone}</div>\n                  <div><strong>{t('onboarding.complete.summary.accounting', 'Norme comptable')}:</strong> {preferences.accountingStandard}</div>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </motion.div>\n\n      {/* Prochaines étapes */}\n      <motion.div variants={itemVariants} className=\"mb-12\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center space-x-2\">\n              <Play className=\"w-5 h-5\" />\n              <span>{t('onboarding.complete.nextSteps.title', 'Prochaines étapes recommandées')}</span>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {nextSteps.map((step, index) => {\n                const Icon = step.icon;\n                return (\n                  <motion.div\n                    key={step.id}\n                    variants={itemVariants}\n                    whileHover={{ scale: 1.02 }}\n                    className=\"group\"\n                  >\n                    <Card className=\"border-2 border-transparent hover:border-blue-200 dark:hover:border-blue-700 transition-all duration-300 cursor-pointer\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-start space-x-3\">\n                          <div className={`p-2 rounded-lg ${step.bgColor} dark:bg-opacity-20`}>\n                            <Icon className={`w-5 h-5 ${step.color}`} />\n                          </div>\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-semibold text-gray-900 dark:text-white mb-1\">\n                              {step.title}\n                            </h4>\n                            <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-3\">\n                              {step.description}\n                            </p>\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              className=\"text-xs\"\n                            >\n                              {step.action}\n                              <ArrowRight className=\"w-3 h-3 ml-1\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </motion.div>\n                );\n              })}\n            </div>\n          </CardContent>\n        </Card>\n      </motion.div>\n\n      {/* Ressources utiles */}\n      <motion.div variants={itemVariants} className=\"mb-12\">\n        <Card className=\"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900 dark:to-purple-900\">\n          <CardHeader>\n            <CardTitle className=\"text-center\">\n              {t('onboarding.complete.resources.title', 'Ressources utiles')}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 text-center\">\n              <div>\n                <div className=\"bg-blue-100 dark:bg-blue-900 p-3 rounded-full w-12 h-12 mx-auto mb-3\">\n                  <BookOpen className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\n                </div>\n                <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">\n                  {t('onboarding.complete.resources.documentation.title', 'Documentation')}\n                </h4>\n                <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-3\">\n                  {t('onboarding.complete.resources.documentation.description', 'Guides détaillés et tutoriels')}\n                </p>\n                <Button variant=\"outline\" size=\"sm\">\n                  <ExternalLink className=\"w-4 h-4 mr-2\" />\n                  {t('onboarding.complete.resources.documentation.action', 'Consulter')}\n                </Button>\n              </div>\n              \n              <div>\n                <div className=\"bg-green-100 dark:bg-green-900 p-3 rounded-full w-12 h-12 mx-auto mb-3\">\n                  <Users className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\n                </div>\n                <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">\n                  {t('onboarding.complete.resources.support.title', 'Support')}\n                </h4>\n                <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-3\">\n                  {t('onboarding.complete.resources.support.description', 'Assistance et chat en direct')}\n                </p>\n                <Button variant=\"outline\" size=\"sm\">\n                  <ExternalLink className=\"w-4 h-4 mr-2\" />\n                  {t('onboarding.complete.resources.support.action', 'Contacter')}\n                </Button>\n              </div>\n              \n              <div>\n                <div className=\"bg-purple-100 dark:bg-purple-900 p-3 rounded-full w-12 h-12 mx-auto mb-3\">\n                  <TrendingUp className=\"w-6 h-6 text-purple-600 dark:text-purple-400\" />\n                </div>\n                <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">\n                  {t('onboarding.complete.resources.training.title', 'Formation')}\n                </h4>\n                <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-3\">\n                  {t('onboarding.complete.resources.training.description', 'Webinaires et formations')}\n                </p>\n                <Button variant=\"outline\" size=\"sm\">\n                  <ExternalLink className=\"w-4 h-4 mr-2\" />\n                  {t('onboarding.complete.resources.training.action', 'S\\'inscrire')}\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </motion.div>\n\n      {/* Bouton final */}\n      <motion.div\n        variants={itemVariants}\n        className=\"text-center\"\n      >\n        <div className=\"mb-6\">\n          <p className=\"text-gray-600 dark:text-gray-300 mb-2\">\n            {t('onboarding.complete.ready', 'Vous êtes maintenant prêt à utiliser CassKai !')}\n          </p>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n            {t('onboarding.complete.modify', 'Vous pouvez modifier ces paramètres à tout moment dans les réglages')}\n          </p>\n        </div>\n        \n        <motion.div\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n        >\n          <Button\n            onClick={onComplete}\n            disabled={saving}\n            size=\"lg\"\n            className=\"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-12 py-4 text-lg\"\n          >\n            {saving ? (\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n                <span>{t('onboarding.complete.finalizing', 'Finalisation...')}</span>\n              </div>\n            ) : (\n              <div className=\"flex items-center space-x-2\">\n                <span>{t('onboarding.complete.launchDashboard', 'Accéder au tableau de bord')}</span>\n                <ArrowRight className=\"w-5 h-5\" />\n              </div>\n            )}\n          </Button>\n        </motion.div>\n      </motion.div>\n    </motion.div>\n  );\n};\n\nexport default CompleteStep;